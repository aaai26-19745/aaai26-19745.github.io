---
import BaseLayout from '../layouts/BaseLayout.astro';

const pageTitle = "Benchmark Metrics Definition";
const activeNav = "metrics";
---
<BaseLayout title={pageTitle} activeNav={activeNav}>
  <main class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 py-12 md:py-16 px-4">
    <div class="container mx-auto">

      <section id="metrics-definitions" class="space-y-8 md:space-y-10">

        <div class="metric-card bg-white dark:bg-slate-800 shadow-lg rounded-xl p-6 md:p-8 transition-all hover:shadow-xl">
          <div class="flex items-start sm:items-center mb-4">
            <div class="flex-shrink-0 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 text-sky-600 dark:text-sky-400">
                <path d="M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.53 1.064 3.005 3.005 0 0 1-1.5 1.434 9.07 9.07 0 0 1-2.55-.042 9.07 9.07 0 0 1-2.55.042c-.928 0-1.79-.304-2.499-1.434a2.25 2.25 0 0 1-.531-1.064l-.002-.144a3.375 3.375 0 0 1 3.375-3.375h3.75a3.375 3.375 0 0 1 3.375 3.375Z" />
              </svg>
            </div>
            <div>
              <h3 class="text-2xl font-semibold text-slate-800 dark:text-slate-100" data-lang-key="cref_title">1. Character Identification Similarity (CIDS)</h3>
              <p class="text-slate-600 dark:text-slate-300 mt-1 text-base leading-relaxed" data-lang-key="cref_desc">Evaluates character identity consistency using Grounding DINO for character detection and feature extraction via CLIP or face embedding models (ArcFace/AdaFace/FaceNet). This metric measures both 'Cross-Similarity' between generated and reference images, and 'Self-Similarity' within the sequence of generated images.</p>
            </div>
          </div>
          <div class="space-y-4 mt-6">
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="cref_sub_pipeline">CIDS Pipeline</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="cref_sub_pipeline_desc">1) Detection & Cropping: Grounding DINO detects character bounding boxes from reference and generated images based on text prompts. 2) Feature Extraction: For realistic characters, features are extracted using ArcFace, AdaFace, and FaceNet. For non-realistic characters, CLIP is used. Both produce a 512-dimensional vector. 3) Matching & Scoring: Cosine similarity is computed between feature vectors to match characters and calculate similarity scores.</p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="cref_sub_cross">Cross-Similarity Score</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="cref_sub_cross_desc">Measures the similarity between characters in the generated images and their corresponding reference images.</p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="cref_sub_self">Self-Similarity Score</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="cref_sub_self_desc">Evaluates the identity consistency of a character across different generated shots within the same story. A higher score indicates that the character's appearance remains stable throughout the sequence.</p>
            </div>
          </div>
        </div>

        <div class="metric-card bg-white dark:bg-slate-800 shadow-lg rounded-xl p-6 md:p-8 transition-all hover:shadow-xl">
          <div class="flex items-start sm:items-center mb-4">
            <div class="flex-shrink-0 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 text-teal-600 dark:text-teal-400">
                <path d="M11.03 2.59a1.5 1.5 0 0 1 1.94 0l7.5 6.363a1.5 1.5 0 0 1 .53 1.144V19.5a1.5 1.5 0 0 1-1.5 1.5h-3a1.5 1.5 0 0 1-1.5-1.5v-3.03a.75.75 0 0 0-.75-.75H8.25a.75.75 0 0 0-.75.75v3.03a1.5 1.5 0 0 1-1.5 1.5h-3a1.5 1.5 0 0 1-1.5-1.5v-9.263a1.5 1.5 0 0 1 .53-1.144l7.5-6.363Z" />
                <path d="M19.5 9.75V15.75h-4.5V9.75h4.5Z" />
                <path fill-rule="evenodd" d="M9 2.25a.75.75 0 0 1 .75.75V4.5a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM15.75 3.75a.75.75 0 0 0-1.5 0V4.5a.75.75 0 0 0 1.5 0V3.75Z" clip-rule="evenodd" />
                <path d="M8.25 12.355a2.25 2.25 0 0 1 2.25-2.25h3a2.25 2.25 0 0 1 2.25 2.25V15a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v-2.645Z" />
              </svg>
            </div>
            <div>
              <h3 class="text-2xl font-semibold text-slate-800 dark:text-slate-100" data-lang-key="sref_title">2. Style Similarity (CSD)</h3>
              <p class="text-slate-600 dark:text-slate-300 mt-1 text-base leading-relaxed" data-lang-key="sref_desc">Adopts a CSD (CLIP Style Disentanglement) based metric to evaluate both intra-image (self) and inter-image (reference) consistency. Each image is encoded by a CLIP vision encoder trained on large-scale style datasets, and pairwise cosine similarity is computed between style embeddings.</p>
            </div>
          </div>
          <div class="space-y-4 mt-6">
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="sref_sub_csd">CSD (CLIP Style Disentanglement)</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="sref_sub_csd_desc">This metric quantifies style consistency using CSD-CLIP features. The process involves: 1) Extracting features with a CLIP vision encoder. 2) Using CSD layers to separate content and style features. 3) Computing the cosine similarity between the resulting style feature embeddings to score both self-similarity (within generated images) and cross-similarity (vs. reference images).</p>
            </div>
          </div>
        </div>

        <div class="metric-card bg-white dark:bg-slate-800 shadow-lg rounded-xl p-6 md:p-8 transition-all hover:shadow-xl">
          <div class="flex items-start sm:items-center mb-4">
            <div class="flex-shrink-0 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 text-indigo-600 dark:text-indigo-400">
                <path fill-rule="evenodd" d="M5.625 1.5H9a2.25 2.25 0 0 1 2.25 2.25v1.875c0 .097.009.19.026.282A5.96 5.96 0 0 1 14.25 6c.39 0 .772.035 1.148.102.097-.017.19-.026.282-.026V3.75A2.25 2.25 0 0 1 18 1.5h3.375c.621 0 1.125.504 1.125 1.125v20.25c0 .621-.504 1.125-1.125 1.125H2.625A1.125 1.125 0 0 1 1.5 22.875V2.625c0-.621.504-1.125 1.125-1.125h3ZM9 12.75a.75.75 0 0 0 0 1.5h.008a.75.75 0 0 0 0-1.5H9Zm.75 2.25a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1-.75-.75ZM9.75 9a.75.75 0 0 0-.75.75V12a.75.75 0 0 0 .75.75h5.25a.75.75 0 0 0 .75-.75V9.75a.75.75 0 0 0-.75-.75H9.75Z" clip-rule="evenodd" />
                <path d="M14.25 7.5a1.5 1.5 0 0 0-1.5 1.5v1.5a1.5 1.5 0 0 0 3 0V9a1.5 1.5 0 0 0-1.5-1.5Z" />
              </svg>
            </div>
            <div>
              <h3 class="text-2xl font-semibold text-slate-800 dark:text-slate-100" data-lang-key="prompt_title">3. Prompt Adherence (Alignment Score)</h3>
              <p class="text-slate-600 dark:text-slate-300 mt-1 text-base leading-relaxed" data-lang-key="prompt_desc">
                {'Evaluates how well generated images align with the storyboard descriptions. Using GPT-4.1, we assess four key aspects on a 0-4 Likert scale, which is then converted to a 100-point scale: Character Interaction, Shooting Method, Static Shot Description, and Individual Actions.'}
              </p>
            </div>
          </div>
          <div class="space-y-4 mt-6">
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="prompt_sub_occm">Onstage Character Count Matching (OCCM)</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="prompt_sub_occm_desc">
                {'Addresses superfluous or missing characters by calculating the accuracy of the character count. The score is calculated as $OCCM = 100 \\times \\exp(-\\frac{|D-E|}{\\epsilon + E})$, where $D$ is the detected count, $E$ is the expected count, and $\\epsilon = e^{-6}$ is a smoothing factor.'}
              </p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="prompt_sub_interaction">Character Interaction Actions</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="prompt_sub_interaction_desc">
                {'Evaluates the alignment between the group-level interactions of characters in the generated image and the intended interactions described in the storyboardâ€™s static shot description.'}
              </p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="prompt_sub_camera">Shooting Method</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="prompt_sub_camera_desc">
                {'Assesses consistency between the depicted camera perspective (e.g., close-up, wide shot) in the generated image and the specified shot design in the storyboard.'}
              </p>
            </div>
             <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="prompt_sub_static_desc">Static Shot Description</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="prompt_sub_static_desc_desc">
                {'Measures the overall correspondence between the generated scene and the narrative details provided in the storyboardâ€™s static shot description, including setting, mood, and layout.'}
              </p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="prompt_sub_action">Individual Actions</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="prompt_sub_action_desc">
                {'Evaluates the accuracy of gestures, expressions, and poses for each character in the generated image relative to their described behavior in the static shot description.'}
              </p>
            </div>
          </div>
        </div>
        
        <div class="metric-card bg-white dark:bg-slate-800 shadow-lg rounded-xl p-6 md:p-8 transition-all hover:shadow-xl">
          <div class="flex items-start sm:items-center mb-4">
            <div class="flex-shrink-0 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 text-amber-500 dark:text-amber-400">
                <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z" clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h3 class="text-2xl font-semibold text-slate-800 dark:text-slate-100" data-lang-key="quality_title">4. Image Quality & Aesthetic</h3>
              <p class="text-slate-600 dark:text-slate-300 mt-1 text-base leading-relaxed" data-lang-key="quality_desc">Evaluates the visual and aesthetic quality of the generated images. This includes an Aesthetic Score from Aesthetic Predictor V2.5, diversity and clarity via Inception Score (IS), and a specific check for Copy-Paste behavior.</p>
            </div>
          </div>
          <div class="space-y-4 mt-6">
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="quality_sub_aesthetic">Aesthetic Score</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="quality_sub_aesthetic_desc">Uses Aesthetic Predictor V2.5 (a SigLIP-based model) to assess image aesthetics on a 1-10 scale. It penalizes blurry, noisy, or visually unappealing images. Scores above 5.5 are generally considered high quality.</p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="quality_sub_copypaste">Copy-Paste Detection</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="quality_sub_copypaste_desc">Quantifies the model's tendency to directly reuse character reference images instead of generating novel depictions. For single-image input models, it measures the similarity gap between a generated character and both its true reference and an unrelated reference. A higher value indicates stronger copy-paste behavior. This metric is not applicable to models that take multiple reference images as input.</p>
            </div>
          </div>
        </div>

        <div class="metric-card bg-white dark:bg-slate-800 shadow-lg rounded-xl p-6 md:p-8 transition-all hover:shadow-xl">
          <div class="flex items-start sm:items-center mb-4">
            <div class="flex-shrink-0 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 text-purple-600 dark:text-purple-400">
                <path fill-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm4.5 9a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm7.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Zm-7.5-4.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Zm7.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z" clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h3 class="text-2xl font-semibold text-slate-800 dark:text-slate-100" data-lang-key="diversity_title">5. Diversity</h3>
              <p class="text-slate-600 dark:text-slate-300 mt-1 text-base leading-relaxed" data-lang-key="diversity_desc">Measures the model's ability to generate varied outputs. Diversity is a key aspect of generation quality, evaluated alongside clarity using the Inception Score (IS).</p>
            </div>
          </div>
          <div class="space-y-4 mt-6">
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="diversity_sub_is">Inception Score (IS)</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="diversity_sub_is_desc">The diversity component of the Inception Score evaluates the variety of content across a batch of generated images. Higher scores suggest the model is producing a wider range of distinct images.</p>
            </div>
          </div>
        </div>

        <div class="metric-card bg-white dark:bg-slate-800 shadow-lg rounded-xl p-6 md:p-8 transition-all hover:shadow-xl">
          <div class="flex items-start sm:items-center mb-4">
            <div class="flex-shrink-0 mr-4">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10 text-rose-500 dark:text-rose-400">
                <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-2.625 6c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm5.25 0c-.54 0-.828.419-.936.634a1.96 1.96 0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 0 .828-.419.936-.634.13-.26.189-.568.189-.866 0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm-5.094 6.032c.068.02.135.032.202.032h4.886c.067 0 .134-.012.202-.032a.75.75 0 0 1 .628.878A3.751 3.751 0 0 1 12 16.5a3.751 3.751 0 0 1-3.292-1.602.75.75 0 0 1 .627-.878Z" clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h3 class="text-2xl font-semibold text-slate-800 dark:text-slate-100" data-lang-key="human_eval_title">6. Human Evaluation</h3>
              <p class="text-slate-600 dark:text-slate-300 mt-1 text-base leading-relaxed" data-lang-key="human_eval_desc">A user study was conducted to validate the automated metrics. Participants assessed generated results on three key dimensions. The analysis revealed a strong correlation between the automated metrics and human preferences.</p>
            </div>
          </div>
          <div class="space-y-4 mt-6">
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="human_eval_env">Environment Consistency</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="human_eval_env_desc">Evaluates if scenes within the same story appear visually cohesive. This metric corresponds to the automated Style Similarity (CSD) score. Top performers in user ratings: UNO (82.0), GPT-4o (81.2), Doubao (80.4).</p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="human_eval_character">Character Identification Consistency</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="human_eval_character_desc">Assesses how consistently main characters are identifiable and coherent throughout the story. This metric corresponds to the automated CIDS score. Top performers in user ratings: Doubao (92.6), AIbrm (88.4), UNO (84.0).</p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="human_eval_aesthetics">Subjective Aesthetics</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="human_eval_aesthetics_desc">Gauges the overall artistic appeal, detail, and storytelling effectiveness of the generated images. This metric corresponds to the automated Aesthetic Quality score. Top performers in user ratings: GPT-4o (85.6), Doubao (85.0), AIbrm (83.0).</p>
            </div>
            <div class="sub-metric-item p-4 bg-slate-50 dark:bg-slate-700/60 rounded-lg border border-slate-200 dark:border-slate-600/80">
              <strong class="text-slate-700 dark:text-slate-200 font-medium" data-lang-key="human_eval_correlation">Correlation Analysis</strong>
              <p class="italic text-sm text-slate-500 dark:text-slate-400 mt-1" data-lang-key="human_eval_correlation_desc">The study demonstrated a strong correlation between human evaluation and automated metrics. Key correlations found were: Self CSD (Kendall's $\tau$=0.42, Spearman's $\rho$=0.56, Pearson's $\sigma$=0.60), Self CIDS ($\tau$=0.50, $\rho$=0.68, $\sigma$=0.80), and Aesthetics ($\tau$=0.26, $\rho$=0.40, $\sigma$=0.54).</p>
            </div>
          </div>
        </div>

      </section>
    </div>
  </main>
</BaseLayout>